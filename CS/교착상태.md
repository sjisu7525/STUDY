# 교착 상태 
## | 교착 상태란?
* 일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상

<br>


## | 교착 상태 표현과 원인
### ① 교착 상태가 발생했을 때의 상황을 정확히 표현해보기

#### ■ 자원 할당 그래프
- 교착 상태 발생 조건 파악 가능
- 어떤 프로세스가 어떤 자원을 할당 받아 사용 중인지 확인 가능
- 어떤 프로세스가 어떤 자원을 기다리고 있는지 확인 가능
- 교착 상태인 경우 자원 할당 그래프가 `원의 형태`를 띄고 있다.(반대는 아님)

<br>

> STEP 1 | 프로세스는 원으로, 자원의 종류는 사각형으로 표현 <br>
> STEP 2 |사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현 <br>
> STEP 3 | 프로세스가 어떤 자원을 할당 받아 사용중이라면 자원에서 프로세스를 향해 화살표를 표시 <br>
> 



### ② 교착 상태가 일어나는 근본적인 이유 이해하기

#### ■ 교착 상태가 발생할 조건
- 아래 네 가지 조건 중 하나라도 만족하지 않으면 교착 상태가 발생하지 않음
- 아래 네 가지 조건을 모두 만족하면 교착 상태가 발생할 수 있음
  - 상호 배제 : 한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없는 상태
  - 점유와 대기 : 자원을 할당 받은 상태에서 다른 자원을 기다리는 상태 
  - 비선점 : 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 못하는 상태
  - 원형 대기 : 프로세스들이 원의 형태로 자원을 대기하는 상태

<br>

## | 교착 상태 해결 방법
### ① 예방
- 애초에 교착 상태가 발생하지 않도록, 교착 상태 발생 조건 중 하나를 없애기
- 교착 상태가 발생하지 않음은 보장할 수 있으나 부작용이 따르는 방식
<br>

```
◎ 상호 배제를 없애면?
  - 모든 자원을 공유 가능하게 만드는 것은 굉장히 이상적인 얘기

◎ 점유와 대기 없애면?
  - 특정 프로세스에 자원을 모두 할당하거나, 아예 할당하지 않는 방식으로 배분
  - 자원의 활용률이 낮아진다는 단점 존재

◎ 비선점 조건을 없애면?
  - 선점이 가능한 자원(eg CPU)에 한해 효과적
  - 모든 자원이 선점 가능한 것이 아니라는 단점 존재

◎ 원형 대기 조건을 없애면?
  - 자원에 번호를 붙이고 오름차순으로 할당하면 원형 대기는 발생하지 않음
  - 자원에 번호를 붙이는 것은 어려운 작업
  - 어떤 자원에 어떤 번호를 붙이느냐에 따라 활용률이 달라짐
```

### ② 회피
- 교착 상태를 무분별한 자월 할당으로 인해 발생했다고 간주
- 교착 상태가 발생하지 않을 만큼 조심 조심 할당하기
- 배분할 수 있는 자원의 양을 고려하여 교착 상태가 발생하지 않을 만큼만 자원 배분
- 안전 상태에서 안전 상태로 움직이는 경우에만 자원을 할당하는 방식(항시 안전 상태를 유지하도록 자원을 할당하는 방식)
<br>

```
◎ 안전 순서열 : 교착 상태 없이 안전하게 프로세스들에 자원을 할당할 수 있는 순서

  - 안전 상태 : 교착 상태 없이 모든 프로세스가 자원을 할당 받고 종료될 수 있는 상태, 안전 순서열이 있는 상태
  - 불안전 상태 : 교착 상태가 발생할 수도 있는 상태, 안전 순서열이 없는 상태
```


### ③ 검출 후 회복
- 교착 상태의 발생을 인정하고 사후에 조치하는 방식
- 프로세스가 자원을 요구하면 일단 할당, 교착 상태가 검출되면 회복

```
◎ 선점을 통한 회복
  - 교착 상태가 해결될 때까지 한 프로세스씩 자원을 몰아주는 방식

◎ 프로세스 강제 종료를 통한 회복
  - 교착 상태에 놓인 프로세스 모두 강제 종료(→ 작업 내역을 잃을 위험)
  - 교착 상태가 해결될 때가지 한 프로세스씩 강제 종료(→ 오버헤드)
```

### ④ 무시
- 타조 알고리즘 